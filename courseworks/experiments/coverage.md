به نام خدا

# پوشش آزمون (Test Coverage)

## اهداف 
- آشنایی دانشجویان با مفهوم پوشش آزمون با کمک یک برنامه ساده 

## نیازمندی‌ها
- آشنایی با یک زبان برنامه‌نویسی مانند جاوا

## ابزارهای مورد استفاده
- IntelliJ IDEA (ترجیحاً نسخه 2018 به بعد)
- JUnit

## منابع آموزشی
- [راه‌اندازی JUnit در پروژه](https://www.jetbrains.com/help/idea/junit.html)

## روال انجام آزمایش
این آزمایش به مفاهیم پوشش آزمون (coverage) می‌پردازد. به‌طور کلی در این آزمایش منظور از پوشش آزمون یا تست آن است که مشخص کنیم موارد آزمون (Test Cases) تا چه اندازه کد اصلی برنامه را مورد آزمون قرار می‌دهند و در واقع چند درصد از کد برنامه توسط این موارد، اجرا و تست می‌شوند. پوشش آزمون می‌تواند توسط معیارهایی نظیر تعداد کلاس‌ها، متدها و خطوط بررسی شود و به‌صورت خودکار از طریق ابزارهایی قابل محاسبه است.

1. [پروژه json-simle](https://github.com/ssc-public/Software-Engineering-Lab/tree/main/base-projects/json-simple) را در محیط IntelliJ باز (import) کنید. در صورتی که فایل‌های برنامه با خطا مواجه شدند و کتابخانه Test را شناسایی نکرده‌اند باید JUnit4 را اضافه کرد. SDK هم از قبل باید نصب شده باشد. ساختار پروژه شامل دو پکیج اصلی main و test است که حاوی کدهای برنامه و کد کلاس تست می‌باشد.
2. کلاس تست TestJson شامل متدهایی جهت تست کلاس‌های اصلی است ولی این متدها همه کلاس‌ها را تست نمی‌کنند. برای یافتن اینکه چند درصد از کلاس‌ها، متدها و خطوط برنامه اصلی توسط TestJson مورد تست قرار می ‌گیرند بر روی کلاس تست، کلیک راست کرده و گزینه Run TestJson with Coverage را انتخاب می‌کنیم. (اگر درصدهای Coverage نشان داده نشده است باید قسمت Edit Configuration را از پنل Coverage کلیک کرد و سپس در قسمت مربوط به Coverage گزینه مربوط به ذخیره خروجی Coverage را انتخاب کرد.)

![image](https://user-images.githubusercontent.com/45389673/230716764-52e1021f-4687-43cd-8139-3e65b152b2f0.png)

![image](https://user-images.githubusercontent.com/45389673/230716778-47ed926e-ab65-4d48-ae1f-47f24715eefd.png)

![image](https://user-images.githubusercontent.com/45389673/230716779-c0bfbc6a-47b8-48e8-bc1e-8a226a8cb2b3.png)

![image](https://user-images.githubusercontent.com/45389673/230716782-1d781c37-3dbb-4f67-be02-410e7d72dd69.png)

برای اینکه با روال کار بهتر آشنا شوید، می‌توانید با گذاشتن breakpoint بر روی یکی از متدهای تست، روند debug آن و پیمایش خطوط برنامه را مشاهده کنید. با استفاده از گزینه Generate Coverage Report (فلش زردرنگ در تصویر فوق) می‌توان گزارشی به فرمت html حاوی خلاصه درصدهای پوشش، خطوط پوشش داده شده (با رنگ سبز) و خطوطی که پوشش داده نشده (خطوط قرمز) را مشاهده کرد.

![image](https://user-images.githubusercontent.com/45389673/230716790-d0f4edae-8e0a-4da8-96ee-ca593754ee61.png)

![image](https://user-images.githubusercontent.com/45389673/230716794-ff87d104-ceb0-4913-af56-91ed069c9455.png)

با کلیک بر روی لینک هر یک از فایل‌های گزارش، خطوط پوشش داده شده (به رنگ سبز) و نشده (به رنگ قرمز) نمایش داده می‌شوند.

![image](https://user-images.githubusercontent.com/45389673/230716796-9fff10fa-56d1-43e7-baca-952f798273a3.png)

### تمرین

روالی ‬‫را که‬ ‫برای‬ ‫پروژه‬ ‫‪json-simle‬‬ ‫ارائه‬ ‫شد‬،‬ ‫برای‬ ‫[پروژه‬ ‫‪CodeCoverageProject](https://github.com/ssc-public/Software-Engineering-Lab/tree/main/base-projects/CodeCoverageProject)‬‬ ‫نیز‬ ‫انجام‬ ‫دهید.

1. برای ‫به‬ ‫دست‬‫‌آوردن‬ ‫اعداد‬ ‫پوشش‬ ‫آزمون‬ ‫کافی‬ ‫است‬ ‫بر‬ ‫روی‬ ‫پکیج‬ ‫‪java‬‬ ‫در‬ ‫مسیر‬ ‫‪test‬‬ ‫کلیک‬ ‫راست‬ ‫کرده‬ ‫و‬ ‫گزینه ‬‫‪coverage‬‬ ‫‪with‬‬ ‫‪Tests‬‬ ‫‪All‬‬ ‫‪Run‬‬ ‫را‬ ‫انتخاب‬ ‫کنید‬ ‫(نیازی‬ ‫به‬ ‫اجرای‬ ‫عادی‬ ‫پروژه‬ ‫نیست)‪.‬‬‫
2. با افزودن بخش‌هایی به کد تست، اعداد پوشش آزمون را در مورد تمامی کلاس‌های موجود در برنامه بهبود دهید. (برخی از کلاس‌ها در پوشه parser قرار گرفته‌اند). درصد افزایش اعداد پوشش آزمون مهم نیست ولی بخش‌هایی که به کد تست اضافه می‌شوند باید معنادار باشند و صرفاً یک فراخوانی ساده کلاس یا متد، بدون استفاده در بخش‌های دیگر کد کافی نیست. 

همراه با ارسال کل پروژه، لازم است گزارشی در مورد بخش‌هایی که به کد تست اضافه کرده‌اید و میزان افزایشی که در اعداد پوشش آزمون به دنبال این تغییرات حاصل شده است را نیز تهیه کنید. توجه داشته باشید که در گزارش باید کاملاً مشخص باشد هر یک از کلاس‌ها چگونه مورد آزمون قرار گرفته‌اند (با درج تصویر از کد و میزان افزایش عدد پوشش آزمون نسبت به قبل به ازای هر کلاس).

گزارش خود را در فایل README.md پروژه بنویسید.

## نحوه ارسال پروژه
پروژه خود را در قالب یک فایل zip در سامانه CW ارسال کنید.
